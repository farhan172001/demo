But I am receiving in this form right?JMSMessage class: jms_text

JMSType:

null

JMSDelivery Mode: 2

JMSDelivery Delay: 0

JMSDelivery Time: 0

JMSExpiration: 0

JMSPriority:

0

FK

JMSMessageID: ID:c3e2d840d7d8d4f24040404040404040e1e9b09096df8c14

JMSTimestamp:

1765312094320

JMSCorrelationID: null

JMSDestination: null

JMSReply To: null

JMSRedelivered:

false

JMSXAppID: PCEGD710

JMSXDeliveryCount: 1

JMSXUserID: PRODSTC

JMS_IBM_Character_Set: IBM500

JMS_IBM_Encoding: 785

JMS_IBM_Format: MQSTRJMS_IBM_MsgType: 8

JMS_IBM_PutApplType: 2

JMS_IBM_PutDate: 20251209

JMS_IBM_PutTime: 20281432











I have received message from this code ,current I have to decode message, I have saved the data in .txt file, make controller that take that file and decide the code,JMSMessage class: jms_text

JMSType:

null

JMSDelivery Mode: 2

JMSDeliveryDelay: 0

JMSDelivery Time: 0

JMSExpiration: 0

JMSPriority: 0

JMSMessageID:

ID:c3e2d840d7d8d4f24040404040404040e1e9b09096df8c14

JMSTimestamp:

1765312094320

JMSCorrelationID: null

JMSDestination: null

JMSReply To:

null

JMSRedelivered: false

JMSXAPPID: PCEGD710

JMSXDeliveryCount: 1

JMSXUserID: PRODSTC

JMS_IBM_Character_Set: IBM500

JMS_IBM_Encoding: 785

JMS_IBM_Format: MQSTRJMS_IBM_MsgType: 8

JMS_IBM_PutApplType: 2

JMS_IBM_PutDate: 20251209

JMS_IBM_PutTime: 20281432, code: @JmsListener(destination = "${app.ibm.mq.queue}") no usages

& Vennapusa Siva Mohan Red

Cond

public void receiveMessage (String message) {

try {

System.out.println("Received MQ message: + message);

} catch (Exception e) {

System.err.println("Error processing MQ message: "+e.getMessage());

}

}, .txt file that we have to decode: 28[($188&?&à)(ZA, Biman;_, +!?Ā BÁN; EA) &%A8.Ná, Ízéi2202122232 88,800ÈÇ ÇRĀMÈD(MÉDIBOÇ$/Maan!

C) &>ÍN-1

i-A; MÁXá- (+377 (1122ÁZIDENZEÇARINĀ Z è<IPÄDÂM/;;,ë+u/É0%; và ác Âm àcă^ [08522; éÃÊ$DÉDIÉ/Åßá ÃMÈa-[_1aeese Ba+ ae; Be (2/28/EemièÏÁ Bo$en(/,ĀDën Āz.zi, 2%áß+2+2)2278.ēnÉï&im--ñÀIÍ] cáéñANA+HA [THÀ>^&*Bailã áÃÁ) BÊñc, [A&A <É-$>8>APCAJ

<ň? [B&MÁ<$E?ÄÄè<NB)+A-, N22 2222222+, CÁCïmà ãÑ+MÂM DÍi.< äèéë$/,ä<Ààlà Bois![)Ä&DE

New^^ <(i]chaiBeña. 202, èi7+82) àà, Âà É¦-Å&2-1880ē?)(Dèsäiliñan>Bàãë;C(>2+

i-a]weèë ÁÄME)?&/2Eià A, 2%ài>ca$ma!-.

aaximiéni-1-22 281/20 N.écÀÈÊÈ(Ā? 28.B ä). Çén] [A?, BAR&

<PAC %EA!@$BA?-ç+ *$, IÄÄN_2Mã<áii>BèâÃá>B]ÅÍçMÄ) ÊÄ(220DÀàèzáz, A22<é Éia?.in Nawiail&ém>$ÍÉämé (BĀRĀDZIMÉAĀCHĀBĀ (AAA)

aAmāměné [&BE/BOÃN$C, MÁZMè3.222228ÇÅ>2123È

Nic+a^) [1, $memà,&àm-/(mèãë?870/iÍ$é+Âm, ^é[Bä$¦ ÁÁÁ/-2, >á(! Càn< % <1,288, DA,B)ẞc&$2éà<i222Bà (22)282-122?1%E>$ÄÈB [HÁMIÁçãā1)^?ññ-22- IAEAÃÉDEIS


AIMA)22-12>$CHĀM (ÈË (Á.ÄÄBÀPHÊ Bea

NegiÈM, AMEM>āÁ; ?08 DIÊM[?]

Í

má+ @]mērasinii Amin-28*DÍ.ÉZZĀMĀM&ÉÏBÁ &¦ÈÊÀ/a>+

tem() ( BĀZĀZING-DÉÀÊN22]>a^i2]-22pizinéäze>PICĀĀRäMÃà, à; AMÇÁ&^-ä[?+%Eèidéäá

ក

) [)[BEBIC)] BÃ MÍñÇ, AgèÉ! *8¢È)Ã.ẞ1]28)ii++]ÁéäÉME_Ñøã) [N<&A>22_BDĀin; ÉS MÉ) Cimaams-Acoán

(ÁrÃae/-A&Aéèdièno! 2%<ÍN; BÁ&Nñààñdëse[A]% praeda












@Bean 1 usage & Vennapusa Siva Mohan Reddy - Contractor *

public ConnectionFactory customMqConnectionFactory() throws Exception {

System.out.println("Custom config is used");

JmsFactoryFactory ff JmsFactoryFactory.getInstance(WMQConstants.JAKARTA_WMQ_PROVIDER);

JmsConnectionFactory cf ff.createConnectionFactory();

cf.setStringProperty (WMQConstants.WMQ_HOST_NAME, host);

cf.setIntProperty(WMQConstants.WMQ_PORT, port);

cf.setStringProperty (WMQConstants.WMQ_CHANNEL, channel);

cf.setStringProperty (WMQConstants.WMQ_QUEUE_MANAGER, queueManager);

cf.setIntProperty(WMQConstants.WMQ_CONNECTION_MODE, WMQConstants.WMQ_CM_CLIENT);

// Credentials

cf.setStringProperty (WMQConstants. USERID, user);

cf.setStringProperty (WMQConstants.PASSWORD, password);

cf.setBooleanProperty(WMQConstants.USER_AUTHENTICATION_MQCSP, b: true);

}

return cf;



@Bean no usages & Vennapusa Siva Mohan Reddy - Contractor

public DefaultJmsListenerContainerFactory jmsListener ContainerFactory() throws Exception {

DefaultJmsListenerContainerFactory factory = new DefaultJmsListenerContainerFactory();

factory.setConnectionFactory (customMqConnectionFactory());

factory.setSessionTransacted(true); // enable transactional session

// concurrency: min-max consumers (adjust to your throughput)

factory.setConcurrency("1-5");

// factory.setErrorHandler(t -> LOGGER.error("Listener error", t));

return factory;

}












@JmsListener(destination = "${app.ibm.mq.queue}")
public void receiveMessage(Message message) {
    try {
        byte[] body;

        if (message instanceof TextMessage) {
            // Warning: TextMessage.getText() is NOT safe
            // MQ returns Java String only if CCSID conversion is enabled
            String raw = ((TextMessage) message).getText();

            // But the text is corrupted, so we must retrieve bytes:
            body = raw.getBytes("Cp500");  // Re-wrap as IBM500 bytes
        }
        else if (message instanceof BytesMessage) {
            BytesMessage bm = (BytesMessage) message;
            body = new byte[(int) bm.getBodyLength()];
            bm.readBytes(body);
        }
        else {
            throw new RuntimeException("Unsupported message type");
        }

        // Decode properly
        String decoded = new String(body, "Cp500");
        System.out.println("Decoded MQ message: " + decoded);

    } catch (Exception e) {
        e.printStackTrace();
    }
}







@JmsListener(destination = "${app.ibm.mq.queue}")
public void receiveMessage(Message message) {
    try {
        byte[] bytes;

        if (message instanceof BytesMessage) {
            // Best scenario: raw bytes directly from MQ
            BytesMessage bm = (BytesMessage) message;
            bytes = new byte[(int) bm.getBodyLength()];
            bm.readBytes(bytes);
        }
        else if (message instanceof TextMessage) {
            TextMessage tm = (TextMessage) message;

            // Extract String provided by MQ
            String text = tm.getText();

            // Determine MQ CCSID
            int ccsid = message.getIntProperty("JMS_IBM_Character_Set");

            if (ccsid == 500 || ccsid == 37 || ccsid == 273) {
                // Sender used EBCDIC but MQ auto-converted → DO NOT RE-CONVERT
                // Just use the String provided by JMS/MQ
                System.out.println("Decoded MQ message: " + text);
                return;
            }

            // Otherwise treat as normal Unicode text
            System.out.println("Decoded MQ message: " + text);
            return;
        }
        else {
            throw new RuntimeException("Unsupported JMS message type: " + message.getClass());
        }

        // If we reach here → we are handling raw bytes (BytesMessage)
        // Decode using appropriate encoding (IBM500)
        String decoded = new String(bytes, "Cp500");
        System.out.println("Decoded MQ message: " + decoded);

    } catch (Exception e) {
        e.printStackTrace();
    }
}











@JmsListener(destination = "${app.ibm.mq.queue}")
public void receiveMessage(Message message) {
    try {
        if (!(message instanceof TextMessage)) {
            throw new RuntimeException("Expected TextMessage, received: " + message.getClass());
        }

        TextMessage tm = (TextMessage) message;

        // MQ already converted EBCDIC → UTF-8 String (corrupted binary)
        String text = tm.getText();

        // Convert BACK to original EBCDIC bytes
        byte[] originalBytes = text.getBytes("Cp500");

        // Skip the first 32 header bytes
        byte[] payload = Arrays.copyOfRange(originalBytes, 32, originalBytes.length);

        // Save PDF/TIFF
        FileOutputStream fos = new FileOutputStream("output.pdf");
        fos.write(payload);
        fos.close();

        System.out.println("Recovered PDF file successfully.");

    } catch (Exception e) {
        e.printStackTrace();
    }
}
