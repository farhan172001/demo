import javax.jms.ConnectionFactory;

import com.ibm.mq.jms.MQQueueConnectionFactory;
import com.ibm.msg.client.wmq.WMQConstants;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.jms.core.JmsTemplate;

@Configuration
public class IbmMqConfig {

    @Value("${mq.host}")
    private String host;

    @Value("${mq.port}")
    private int port;

    @Value("${mq.channel}")
    private String channel;

    @Value("${mq.queueManager}")
    private String queueManager;

    @Value("${mq.username}")
    private String username;

    @Value("${mq.password}")
    private String password;

    @Value("${mq.queueName}")
    private String queueName;

    @Bean
    public ConnectionFactory mqConnectionFactory() throws Exception {
        MQQueueConnectionFactory connectionFactory = new MQQueueConnectionFactory();

        connectionFactory.setHostName(host);
        connectionFactory.setPort(port);
        connectionFactory.setQueueManager(queueManager);
        connectionFactory.setChannel(channel);
        connectionFactory.setTransportType(WMQConstants.WMQ_CM_CLIENT);

        // Authentication (username/password)
        connectionFactory.setStringProperty(WMQConstants.USERID, username);
        connectionFactory.setStringProperty(WMQConstants.PASSWORD, password);

        return connectionFactory;
    }

    @Bean
    public JmsTemplate jmsTemplate(ConnectionFactory mqConnectionFactory) {
        JmsTemplate jmsTemplate = new JmsTemplate(mqConnectionFactory);
        jmsTemplate.setDefaultDestinationName(queueName);
        jmsTemplate.setReceiveTimeout(5000);
        return jmsTemplate;
    }
}





import javax.annotation.PostConstruct;
import javax.jms.*;

import org.springframework.jms.core.JmsTemplate;
import org.springframework.stereotype.Service;

@Service
public class QueueAccessChecker {

    private final JmsTemplate jmsTemplate;

    public QueueAccessChecker(JmsTemplate jmsTemplate) {
        this.jmsTemplate = jmsTemplate;
    }

    @PostConstruct
    public void checkQueueAccess() {
        try {
            System.out.println("üîç Checking MQ Queue Access...");

            // 1. Try to open the queue (session-level)
            Connection connection = jmsTemplate.getConnectionFactory().createConnection();
            connection.start();
            Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);

            Queue queue = session.createQueue(jmsTemplate.getDefaultDestinationName());
            System.out.println("‚úî Queue opened successfully: " + queue.getQueueName());

            // 2. Try to read (non-blocking)
            Message message = jmsTemplate.receive();

            if (message == null) {
                System.out.println("‚úî Queue accessible but no messages available");
            } else {
                System.out.println("‚úî Message received from queue: " + message);
            }

            session.close();
            connection.close();

            System.out.println("‚úî Queue read/open check completed");

        } catch (JMSException e) {
            System.err.println("‚ùå MQ JMS Error: " + e.getMessage());
            e.printStackTrace();

        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }
}





<!-- Spring JMS -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-activemq</artifactId>
</dependency>

<!-- IBM MQ client -->
<dependency>
    <groupId>com.ibm.mq</groupId>
    <artifactId>com.ibm.mq.allclient</artifactId>
    <version>9.3.0.0</version>
</dependency>




<!-- Jakarta JMS API -->
<dependency>
    <groupId>jakarta.jms</groupId>
    <artifactId>jakarta.jms-api</artifactId>
    <version>3.0.0</version>
</dependency>

<!-- IBM MQ Jakarta client (9.x or 10.x, Jakarta compatible) -->
<dependency>
    <groupId>com.ibm.mq</groupId>
    <artifactId>com.ibm.mq.jakarta.client</artifactId>
    <version>9.3.0.0</version>
</dependency>
